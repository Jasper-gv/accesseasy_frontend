import{c as L}from"./canteenService-CyqqLO9V.js";import{_ as te,r as b,c as ae,o as se,l as y,i as a,f as l,p as o,w as t,H as d,D as oe,I as ne,e as n,G as O,a as v,k as c,U as x,x as u,J as B,g as k,h as m,j as f,$ as w,v as g,a7 as h,F as A,B as D,a8 as M,a9 as E,b0 as G,aj as q,ak as _,a1 as p,aH as de,al as J,m as Q,b3 as ie,b4 as W,aW as K,s as N,au as X,a0 as ue,n as re,a6 as T}from"./index-B12n8wa1.js";const fe={class:"canteen-dashboard"},me={class:"dashboard-header mb-6"},ve={class:"text-h3 font-weight-bold mb-4"},pe={class:"d-flex align-center"},ce={class:"mt-2 mb-3"},ge={class:"d-flex flex-column align-end"},be={class:"text-h6 font-weight-bold text-orange mb-2"},ye={class:"d-flex gap-1"},xe={key:1,class:"text-center pa-8"},we={class:"text-h3 font-weight-bold text-primary"},Ve={class:"text-h3 font-weight-bold text-success"},ke={class:"text-h3 font-weight-bold text-info"},Ce={class:"text-h6 font-weight-bold text-orange"},Ae={class:"d-flex align-center gap-2"},Me={class:"d-flex align-end justify-space-between px-4 pb-2",style:{height:"200px"}},_e={class:"text-caption text-grey"},Te={class:"pa-4"},ze={class:"d-flex justify-space-between mb-2"},Se={class:"d-flex justify-space-between mb-2 mt-4"},Ue={class:"d-flex align-center justify-center mt-2"},Le={__name:"CanteenDashboard",setup(Oe){const z=b("orders"),C=b([]),H=b([]),R=b(!1),I=b(!1),r=b({allowanceType:"tier",monthlyAllowance:2e3,carryForward:!0,maxBalance:5e3,resetMonthly:!1,defaultDiscount:0}),P=b({todayOrders:24,todayRevenue:5600,activeUsers:45}),$=ae(()=>C.value.filter(i=>i.status!=="Completed")),S=async()=>{R.value=!0;try{const i=await L.getOrders();C.value=i.slice(0,20)}catch(i){console.error(i)}finally{R.value=!1}},Y=async()=>{try{H.value=await L.getMenu()}catch(i){console.error(i)}},Z=async i=>{await L.toggleAvailability(i)},j=async(i,e)=>{try{await L.updateOrderStatus(i,e),await S()}catch(s){console.error(s)}},ee=async()=>{I.value=!0,setTimeout(()=>{I.value=!1,alert("Wallet configuration saved!")},1e3)},F=i=>({Pending:"warning",Preparing:"info",Ready:"success",Completed:"grey"})[i]||"grey",le=i=>({Pending:"mdi-clock-outline",Preparing:"mdi-chef-hat",Ready:"mdi-check-circle",Completed:"mdi-checkbox-marked-circle"})[i]||"mdi-help-circle";return se(()=>{S(),Y(),setInterval(S,1e4)}),(i,e)=>(n(),y("div",fe,[a("div",me,[a("h1",ve,[l(d,{size:"44",color:"orange",class:"mr-3"},{default:t(()=>e[8]||(e[8]=[o("mdi-food-fork-drink")])),_:1}),e[9]||(e[9]=o(" Canteen Management "))]),l(oe,{modelValue:z.value,"onUpdate:modelValue":e[0]||(e[0]=s=>z.value=s),"bg-color":"transparent",color:"orange",class:"mb-0"},{default:t(()=>[l(O,{value:"orders",class:"text-none"},{default:t(()=>[l(d,{start:""},{default:t(()=>e[10]||(e[10]=[o("mdi-clipboard-list")])),_:1}),e[11]||(e[11]=o(" Active Orders ")),$.value.length>0?(n(),v(x,{key:0,size:"small",color:"warning",class:"ml-2"},{default:t(()=>[o(u($.value.length),1)]),_:1})):c("",!0)]),_:1}),l(O,{value:"menu",class:"text-none"},{default:t(()=>[l(d,{start:""},{default:t(()=>e[12]||(e[12]=[o("mdi-food")])),_:1}),e[13]||(e[13]=o(" Menu Management "))]),_:1}),l(O,{value:"wallet",class:"text-none"},{default:t(()=>[l(d,{start:""},{default:t(()=>e[14]||(e[14]=[o("mdi-wallet")])),_:1}),e[15]||(e[15]=o(" Wallet Configuration "))]),_:1}),l(O,{value:"analytics",class:"text-none"},{default:t(()=>[l(d,{start:""},{default:t(()=>e[16]||(e[16]=[o("mdi-chart-line")])),_:1}),e[17]||(e[17]=o(" Analytics "))]),_:1})]),_:1},8,["modelValue"])]),l(ne,{modelValue:z.value,"onUpdate:modelValue":e[7]||(e[7]=s=>z.value=s)},{default:t(()=>[l(B,{value:"orders"},{default:t(()=>[l(k,null,{default:t(()=>[l(m,{cols:"12",md:"8"},{default:t(()=>[l(f,{elevation:"3"},{default:t(()=>[l(w,{class:"d-flex align-center justify-space-between pa-6 bg-grey-lighten-5"},{default:t(()=>[a("div",pe,[l(d,{class:"mr-2",color:"orange"},{default:t(()=>e[18]||(e[18]=[o("mdi-food-variant")])),_:1}),e[19]||(e[19]=a("span",{class:"text-h6 font-weight-bold"},"Live Orders",-1))]),l(g,{icon:"mdi-refresh",variant:"text",onClick:S,loading:R.value},null,8,["loading"])]),_:1}),C.value.length>0?(n(),v(h,{key:0},{default:t(()=>[(n(!0),y(A,null,D(C.value,(s,U)=>(n(),y(A,{key:s.id},[l(M,{class:"order-item pa-4"},{prepend:t(()=>[l(q,{color:F(s.status)+"-lighten-4",size:"56"},{default:t(()=>[l(d,{color:F(s.status),size:"28"},{default:t(()=>[o(u(le(s.status)),1)]),_:2},1032,["color"])]),_:2},1032,["color"])]),append:t(()=>[a("div",ge,[a("div",be," ₹"+u(s.total),1),l(x,{color:F(s.status),size:"small",variant:"flat",class:"mb-2"},{default:t(()=>[o(u(s.status),1)]),_:2},1032,["color"]),a("div",ye,[s.status==="Pending"?(n(),v(g,{key:0,color:"primary",size:"small",onClick:V=>j(s.id,"Preparing")},{default:t(()=>e[20]||(e[20]=[o(" Start ")])),_:2},1032,["onClick"])):c("",!0),s.status==="Preparing"?(n(),v(g,{key:1,color:"info",size:"small",onClick:V=>j(s.id,"Ready")},{default:t(()=>e[21]||(e[21]=[o(" Mark Ready ")])),_:2},1032,["onClick"])):c("",!0),s.status==="Ready"?(n(),v(g,{key:2,color:"success",size:"small",onClick:V=>j(s.id,"Completed")},{default:t(()=>e[22]||(e[22]=[o(" Complete ")])),_:2},1032,["onClick"])):c("",!0)])])]),default:t(()=>[l(E,{class:"font-weight-bold mb-1"},{default:t(()=>[o(" Order #"+u(s.id),1)]),_:2},1024),l(G,{class:"text-caption mb-2"},{default:t(()=>[o(u(new Date(s.createdAt).toLocaleTimeString()),1)]),_:2},1024),a("div",ce,[(n(!0),y(A,null,D(s.items,V=>(n(),v(x,{key:V.id,size:"small",class:"mr-1 mb-1",variant:"outlined"},{default:t(()=>[o(u(V.quantity)+"x "+u(V.name),1)]),_:2},1024))),128))])]),_:2},1024),U<C.value.length-1?(n(),v(_,{key:0})):c("",!0)],64))),128))]),_:1})):(n(),y("div",xe,[l(d,{size:"64",color:"grey-lighten-3"},{default:t(()=>e[23]||(e[23]=[o("mdi-food-off")])),_:1}),e[24]||(e[24]=a("p",{class:"text-grey mt-4"},"No active orders",-1))]))]),_:1})]),_:1}),l(m,{cols:"12",md:"4"},{default:t(()=>[l(k,null,{default:t(()=>[l(m,{cols:"12"},{default:t(()=>[l(f,{class:"stat-card",elevation:"2"},{default:t(()=>[l(p,null,{default:t(()=>[e[25]||(e[25]=a("div",{class:"text-caption text-grey-darken-1 mb-1"},"Today's Orders",-1)),a("div",we,u(P.value.todayOrders),1)]),_:1})]),_:1})]),_:1}),l(m,{cols:"12"},{default:t(()=>[l(f,{class:"stat-card",elevation:"2"},{default:t(()=>[l(p,null,{default:t(()=>[e[26]||(e[26]=a("div",{class:"text-caption text-grey-darken-1 mb-1"},"Today's Revenue",-1)),a("div",Ve,"₹"+u(P.value.todayRevenue),1)]),_:1})]),_:1})]),_:1}),l(m,{cols:"12"},{default:t(()=>[l(f,{class:"stat-card",elevation:"2"},{default:t(()=>[l(p,null,{default:t(()=>[e[27]||(e[27]=a("div",{class:"text-caption text-grey-darken-1 mb-1"},"Active Users",-1)),a("div",ke,u(P.value.activeUsers),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(B,{value:"menu"},{default:t(()=>[l(k,null,{default:t(()=>[l(m,{cols:"12",md:"8"},{default:t(()=>[l(f,{elevation:"3"},{default:t(()=>[l(w,{class:"pa-6 bg-grey-lighten-5"},{default:t(()=>[l(d,{class:"mr-2",color:"orange"},{default:t(()=>e[28]||(e[28]=[o("mdi-food")])),_:1}),e[29]||(e[29]=a("span",{class:"text-h6 font-weight-bold"},"Menu Items",-1))]),_:1}),l(h,null,{default:t(()=>[(n(!0),y(A,null,D(H.value,s=>(n(),v(M,{key:s.id,class:"pa-4"},{prepend:t(()=>[l(q,{color:"orange-lighten-4",size:"48"},{default:t(()=>[l(d,{color:"orange"},{default:t(()=>e[30]||(e[30]=[o("mdi-food-variant")])),_:1})]),_:1})]),append:t(()=>[a("div",Ae,[l(x,{color:s.available?"success":"grey",size:"small",variant:"flat"},{default:t(()=>[o(u(s.available?"Available":"Out of Stock"),1)]),_:2},1032,["color"]),l(de,{modelValue:s.available,"onUpdate:modelValue":[U=>s.available=U,U=>Z(s.id)],color:"success",density:"compact","hide-details":"",inset:""},null,8,["modelValue","onUpdate:modelValue"])])]),default:t(()=>[l(E,{class:"font-weight-medium"},{default:t(()=>[o(u(s.name),1)]),_:2},1024),l(G,null,{default:t(()=>[l(x,{size:"x-small",class:"mr-1"},{default:t(()=>[o(u(s.category),1)]),_:2},1024),a("span",Ce,"₹"+u(s.price),1)]),_:2},1024)]),_:2},1024))),128))]),_:1}),l(_),l(J,{class:"pa-4"},{default:t(()=>[l(g,{block:"",color:"orange",variant:"outlined","prepend-icon":"mdi-plus",size:"large"},{default:t(()=>e[31]||(e[31]=[o(" Add New Menu Item ")])),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(B,{value:"wallet"},{default:t(()=>[l(k,null,{default:t(()=>[l(m,{cols:"12",md:"8"},{default:t(()=>[l(f,{elevation:"3"},{default:t(()=>[l(w,{class:"pa-6 bg-purple-lighten-5"},{default:t(()=>[l(d,{class:"mr-2",color:"purple"},{default:t(()=>e[32]||(e[32]=[o("mdi-wallet-giftcard")])),_:1}),e[33]||(e[33]=a("span",{class:"text-h6 font-weight-bold"},"User Wallet Configuration",-1))]),_:1}),l(p,{class:"pa-6"},{default:t(()=>[l(Q,{color:"purple-lighten-5",class:"mb-6",border:"start","border-color":"purple"},{default:t(()=>e[34]||(e[34]=[a("div",{class:"text-body-2 text-purple-darken-2"}," Configure wallet rules for canteen credit. These settings work in conjunction with Access Level permissions. ",-1)])),_:1}),e[39]||(e[39]=a("h3",{class:"text-h6 mb-4"},"Monthly Credit Allowance",-1)),l(ie,{modelValue:r.value.allowanceType,"onUpdate:modelValue":e[1]||(e[1]=s=>r.value.allowanceType=s),class:"mb-4"},{default:t(()=>[l(W,{value:"none",color:"purple"},{label:t(()=>e[35]||(e[35]=[a("div",null,[a("div",{class:"font-weight-medium"},"No Automatic Allowance"),a("div",{class:"text-caption text-grey"},"Credits managed via Access Levels only")],-1)])),_:1}),l(W,{value:"fixed",color:"purple"},{label:t(()=>e[36]||(e[36]=[a("div",null,[a("div",{class:"font-weight-medium"},"Fixed Monthly Allowance"),a("div",{class:"text-caption text-grey"},"Same amount for all users each month")],-1)])),_:1}),l(W,{value:"tier",color:"purple"},{label:t(()=>e[37]||(e[37]=[a("div",null,[a("div",{class:"font-weight-medium"},"Access Level Based"),a("div",{class:"text-caption text-grey"},"Credit limits defined in each access level")],-1)])),_:1})]),_:1},8,["modelValue"]),l(K,null,{default:t(()=>[r.value.allowanceType==="fixed"?(n(),v(f,{key:0,variant:"outlined",class:"pa-4 mb-4"},{default:t(()=>[l(N,{modelValue:r.value.monthlyAllowance,"onUpdate:modelValue":e[2]||(e[2]=s=>r.value.monthlyAllowance=s),modelModifiers:{number:!0},label:"Monthly Allowance per User",prefix:"₹",type:"number",variant:"outlined",hint:"This amount will be credited to all users monthly","persistent-hint":""},null,8,["modelValue"])]),_:1})):c("",!0)]),_:1}),l(_,{class:"my-6"}),e[40]||(e[40]=a("h3",{class:"text-h6 mb-4"},"Carry Forward & Expiry",-1)),l(X,{modelValue:r.value.carryForward,"onUpdate:modelValue":e[3]||(e[3]=s=>r.value.carryForward=s),label:"Allow unused balance to carry forward to next month",color:"purple","hide-details":"",class:"mb-4"},null,8,["modelValue"]),l(K,null,{default:t(()=>[r.value.carryForward?(n(),v(f,{key:0,variant:"outlined",class:"pa-4 mb-4"},{default:t(()=>[l(N,{modelValue:r.value.maxBalance,"onUpdate:modelValue":e[4]||(e[4]=s=>r.value.maxBalance=s),modelModifiers:{number:!0},label:"Maximum Balance Cap",prefix:"₹",type:"number",variant:"outlined",hint:"Safety limit to prevent excessive accumulation","persistent-hint":""},null,8,["modelValue"])]),_:1})):c("",!0)]),_:1}),r.value.carryForward?c("",!0):(n(),v(X,{key:0,modelValue:r.value.resetMonthly,"onUpdate:modelValue":e[5]||(e[5]=s=>r.value.resetMonthly=s),label:"Reset unused balance to zero on 1st of each month",color:"purple","hide-details":"",class:"mb-4"},null,8,["modelValue"])),l(_,{class:"my-6"}),e[41]||(e[41]=a("h3",{class:"text-h6 mb-4"},"Discounts & Offers",-1)),l(N,{modelValue:r.value.defaultDiscount,"onUpdate:modelValue":e[6]||(e[6]=s=>r.value.defaultDiscount=s),modelModifiers:{number:!0},label:"Default Discount for All Users",suffix:"%",type:"number",variant:"outlined",hint:"Base discount before access level bonuses","persistent-hint":"",class:"mb-4"},null,8,["modelValue"]),l(Q,{type:"info",variant:"tonal",density:"compact"},{default:t(()=>e[38]||(e[38]=[o(" Additional discounts can be defined per Access Level in the Access Level Manager ")])),_:1})]),_:1}),l(_),l(J,{class:"pa-6"},{default:t(()=>[l(ue),l(g,{color:"purple",variant:"flat",size:"large",onClick:ee,loading:I.value},{default:t(()=>[l(d,{start:""},{default:t(()=>e[42]||(e[42]=[o("mdi-content-save")])),_:1}),e[43]||(e[43]=o(" Save Configuration "))]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1}),l(m,{cols:"12",md:"4"},{default:t(()=>[l(f,{elevation:"2",class:"mb-4"},{default:t(()=>[l(w,{class:"text-body-1 pa-4"},{default:t(()=>[l(d,{class:"mr-2",color:"info"},{default:t(()=>e[44]||(e[44]=[o("mdi-information")])),_:1}),e[45]||(e[45]=o(" How It Works "))]),_:1}),l(p,{class:"text-body-2"},{default:t(()=>e[46]||(e[46]=[a("ol",{class:"pl-4"},[a("li",{class:"mb-2"},"Users are assigned Access Levels with credit limits"),a("li",{class:"mb-2"},"Monthly allowances are auto-credited on 1st"),a("li",{class:"mb-2"},"Discounts stack: Base + Access Level bonus"),a("li",{class:"mb-2"},"Balance tracked per user in real-time")],-1)])),_:1})]),_:1}),l(f,{elevation:"2"},{default:t(()=>[l(w,{class:"text-body-1 pa-4"},{default:t(()=>[l(d,{class:"mr-2",color:"success"},{default:t(()=>e[47]||(e[47]=[o("mdi-link")])),_:1}),e[48]||(e[48]=o(" Quick Links "))]),_:1}),l(p,null,{default:t(()=>[l(g,{block:"",variant:"outlined",to:"/apps/access-levels",class:"mb-2",color:"purple"},{default:t(()=>[l(d,{start:""},{default:t(()=>e[49]||(e[49]=[o("mdi-key-variant")])),_:1}),e[50]||(e[50]=o(" Manage Access Levels "))]),_:1}),l(g,{block:"",variant:"outlined",to:"/go/canteen",target:"_blank",color:"orange"},{default:t(()=>[l(d,{start:""},{default:t(()=>e[51]||(e[51]=[o("mdi-launch")])),_:1}),e[52]||(e[52]=o(" View Client App "))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(B,{value:"analytics"},{default:t(()=>[l(k,null,{default:t(()=>[l(m,{cols:"12",md:"8"},{default:t(()=>[l(f,{elevation:"2",class:"mb-4"},{default:t(()=>[l(w,{class:"pa-4"},{default:t(()=>e[53]||(e[53]=[o("Revenue Trend (7 Days)")])),_:1}),l(p,null,{default:t(()=>[a("div",Me,[(n(),y(A,null,D(7,s=>a("div",{key:s,class:"d-flex flex-column align-center",style:{width:"10%"}},[a("div",{class:"bg-orange rounded-t-lg mb-2",style:re({width:"80%",height:Math.floor(Math.random()*80+20)+"%"})},null,4),a("div",_e,"Day "+u(s),1)])),64))])]),_:1})]),_:1}),l(k,null,{default:t(()=>[l(m,{cols:"12",md:"6"},{default:t(()=>[l(f,{elevation:"2",title:"Popular Items"},{default:t(()=>[l(h,{density:"compact"},{default:t(()=>[l(M,{title:"Veg Thali",subtitle:"142 Orders"},{append:t(()=>e[54]||(e[54]=[a("div",{class:"text-h6 font-weight-bold"},"₹11,360",-1)])),_:1}),l(M,{title:"Coffee",subtitle:"89 Orders"},{append:t(()=>e[55]||(e[55]=[a("div",{class:"text-h6 font-weight-bold"},"₹2,670",-1)])),_:1}),l(M,{title:"Chicken Biryani",subtitle:"56 Orders"},{append:t(()=>e[56]||(e[56]=[a("div",{class:"text-h6 font-weight-bold"},"₹8,400",-1)])),_:1})]),_:1})]),_:1})]),_:1}),l(m,{cols:"12",md:"6"},{default:t(()=>[l(f,{elevation:"2",title:"Peak Hours"},{default:t(()=>[a("div",Te,[a("div",ze,[e[58]||(e[58]=a("span",null,"12:00 PM - 2:00 PM",-1)),l(x,{color:"red",size:"small"},{default:t(()=>e[57]||(e[57]=[o("Highest")])),_:1})]),l(T,{"model-value":"90",color:"red",height:"8",rounded:""}),a("div",Se,[e[60]||(e[60]=a("span",null,"8:00 AM - 10:00 AM",-1)),l(x,{color:"orange",size:"small"},{default:t(()=>e[59]||(e[59]=[o("Medium")])),_:1})]),l(T,{"model-value":"60",color:"orange",height:"8",rounded:""})])]),_:1})]),_:1})]),_:1})]),_:1}),l(m,{cols:"12",md:"4"},{default:t(()=>[l(f,{elevation:"2",class:"mb-4 bg-orange-lighten-5"},{default:t(()=>[l(p,{class:"text-center pa-6"},{default:t(()=>[e[64]||(e[64]=a("div",{class:"text-caption text-grey-darken-1 mb-1"},"Total Revenue (This Month)",-1)),e[65]||(e[65]=a("div",{class:"text-h3 font-weight-bold text-orange"},"₹45,200",-1)),a("div",Ue,[l(d,{color:"success",size:"small"},{default:t(()=>e[61]||(e[61]=[o("mdi-arrow-up")])),_:1}),e[62]||(e[62]=a("span",{class:"text-success text-body-2 font-weight-bold ml-1"},"12.5%",-1)),e[63]||(e[63]=a("span",{class:"text-caption text-grey ml-1"},"vs last month",-1))])]),_:1})]),_:1}),l(f,{elevation:"2"},{default:t(()=>[l(w,null,{default:t(()=>e[66]||(e[66]=[o("Category Split")])),_:1}),l(p,null,{default:t(()=>[e[67]||(e[67]=a("div",{class:"d-flex align-center justify-space-between mb-2"},[a("span",null,"Meals"),a("span",null,"60%")],-1)),l(T,{"model-value":"60",color:"primary",height:"6",class:"mb-4",rounded:""}),e[68]||(e[68]=a("div",{class:"d-flex align-center justify-space-between mb-2"},[a("span",null,"Beverages"),a("span",null,"25%")],-1)),l(T,{"model-value":"25",color:"info",height:"6",class:"mb-4",rounded:""}),e[69]||(e[69]=a("div",{class:"d-flex align-center justify-space-between mb-2"},[a("span",null,"Snacks"),a("span",null,"15%")],-1)),l(T,{"model-value":"15",color:"success",height:"6",class:"mb-2",rounded:""})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]))}},Re=te(Le,[["__scopeId","data-v-4cfe4e41"]]);export{Re as default};
