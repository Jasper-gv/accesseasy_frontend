const o="accesseasy_parking_mock_db",n=()=>{const e=localStorage.getItem(o);return e?JSON.parse(e):[]},i=e=>{localStorage.setItem(o,JSON.stringify(e))};localStorage.getItem(o)||i([{id:"1",plateNumber:"KA-01-AB-1234",type:"Car",entryTime:new Date().toISOString(),status:"Parked",slot:"A-101"}]);const c={async getParkedVehicles(){return await new Promise(e=>setTimeout(e,500)),n().filter(e=>e.status==="Parked")},async vehicleEntry(e){await new Promise(s=>setTimeout(s,600));const t=n();if(t.find(s=>s.plateNumber===e.plateNumber&&s.status==="Parked"))throw new Error("Vehicle already parked");const r={...e,id:Date.now().toString(),entryTime:new Date().toISOString(),status:"Parked"};return t.unshift(r),i(t),r},async vehicleExit(e){await new Promise(r=>setTimeout(r,500));const t=n(),a=t.findIndex(r=>r.id===e);if(a!==-1){t[a].status="Exited",t[a].exitTime=new Date().toISOString();const r=(new Date-new Date(t[a].entryTime))/36e5;return t[a].fee=Math.max(10,Math.ceil(r)*20),i(t),t[a]}throw new Error("Vehicle not found")},async getStats(){const t=n().filter(a=>a.status==="Parked");return{occupied:t.length,available:50-t.length,totalSlots:50}}};export{c as p};
