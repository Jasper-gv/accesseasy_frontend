import{p as m}from"./placesService-C-pGz1oz.js";import{r as u,o as w,l as D,f as a,w as l,g as A,j as g,X as b,e as S,h as y,i as p,v as n,p as s,aJ as T,U as B,x as V,a1 as N,al as P,a0 as _}from"./index-B12n8wa1.js";const M={__name:"PlacesList",setup(z){const f=u([]),d=u(!0),i=u(!1),r=u(null),c=u(!1),x=[{title:"Name",key:"name",align:"start"},{title:"Type",key:"type",align:"start"},{title:"Address",key:"address",align:"start"},{title:"Status",key:"status",align:"start"},{title:"Actions",key:"actions",align:"end",sortable:!1}],v=async()=>{d.value=!0;try{f.value=await m.getAll()}catch(o){console.error("Failed to load places",o)}finally{d.value=!1}},k=o=>{r.value=o,i.value=!0},C=async()=>{if(r.value){c.value=!0;try{await m.delete(r.value.id),await v(),i.value=!1}catch(o){console.error("Failed to delete",o)}finally{c.value=!1,r.value=null}}};return w(()=>{v()}),(o,e)=>(S(),D("div",null,[a(A,{class:"mb-4",align:"center"},{default:l(()=>[a(y,null,{default:l(()=>e[2]||(e[2]=[p("h1",{class:"text-h4"},"Locations",-1),p("p",{class:"text-subtitle-1"},"Manage your gyms, branches, and sites.",-1)])),_:1}),a(y,{class:"text-right"},{default:l(()=>[a(n,{color:"secondary",variant:"outlined",class:"mr-2","prepend-icon":"mdi-cog",to:"/apps/places/settings"},{default:l(()=>e[3]||(e[3]=[s("Settings")])),_:1}),a(n,{color:"primary","prepend-icon":"mdi-plus",to:"/apps/places/new"},{default:l(()=>e[4]||(e[4]=[s("Add Location")])),_:1})]),_:1})]),_:1}),a(g,{elevation:"0",border:""},{default:l(()=>[a(T,{headers:x,items:f.value,loading:d.value,class:"elevation-0"},{"item.status":l(({item:t})=>[a(B,{color:t.status==="Active"?"success":"grey",size:"small"},{default:l(()=>[s(V(t.status),1)]),_:2},1032,["color"])]),"item.actions":l(({item:t})=>[a(n,{icon:"mdi-pencil",size:"small",variant:"text",color:"primary",to:`/apps/places/${t.id}/edit`},null,8,["to"]),a(n,{icon:"mdi-delete",size:"small",variant:"text",color:"error",onClick:L=>k(t)},null,8,["onClick"])]),_:1},8,["items","loading"])]),_:1}),a(b,{modelValue:i.value,"onUpdate:modelValue":e[1]||(e[1]=t=>i.value=t),"max-width":"400"},{default:l(()=>[a(g,{title:"Delete Place?"},{default:l(()=>[a(N,null,{default:l(()=>{var t;return[e[5]||(e[5]=s("Are you sure you want to delete ")),p("strong",null,V((t=r.value)==null?void 0:t.name),1),e[6]||(e[6]=s("?"))]}),_:1}),a(P,null,{default:l(()=>[a(_),a(n,{variant:"text",onClick:e[0]||(e[0]=t=>i.value=!1)},{default:l(()=>e[7]||(e[7]=[s("Cancel")])),_:1}),a(n,{color:"error",variant:"flat",loading:c.value,onClick:C},{default:l(()=>e[8]||(e[8]=[s("Delete")])),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]))}};export{M as default};
