import{r as n,o as F,l as A,i as d,f as l,w as s,D as N,I as z,X as R,e as y,G as g,p as o,J as B,j as C,a1 as w,g as c,h as v,v as m,F as G,B as H,a as W,b1 as q,$ as E,x as r,b2 as J,U as L,H as X,ak as K,al as I,a2 as O,C as Q,s as M,a3 as P,au as Y,a0 as Z}from"./index-B12n8wa1.js";import{p}from"./passTemplateService-D9Jd4I3Q.js";const _={class:"d-flex justify-space-between mb-1"},h={class:"font-weight-bold"},ee={class:"d-flex justify-space-between mb-1"},le={class:"d-flex justify-space-between"},oe={__name:"PlaceSettings",setup(ae){const f=n("templates"),x=n([]),i=n(!1),V=n(!1),k=n(!1),T=n(null),S={name:"",type:"Visitor",accessMode:"Auto Entry",duration:24,cost:0,isMembership:!1},t=n({...S}),b=async()=>{try{x.value=await p.getAll()}catch(u){console.error(u)}},U=(u=null)=>{t.value=u?{...u}:{...S},i.value=!0},D=async()=>{const{valid:u}=await T.value.validate();if(u){V.value=!0;try{t.value.id?await p.update(t.value.id,t.value):await p.create(t.value),await b(),i.value=!1}catch(e){console.error(e)}finally{V.value=!1}}},$=async u=>{if(confirm("Are you sure?"))try{await p.delete(u),await b()}catch(e){console.error(e)}};return F(b),(u,e)=>(y(),A("div",null,[e[25]||(e[25]=d("h1",{class:"text-h4 mb-4"},"Settings",-1)),l(N,{modelValue:f.value,"onUpdate:modelValue":e[0]||(e[0]=a=>f.value=a),color:"primary"},{default:s(()=>[l(g,{value:"general"},{default:s(()=>e[12]||(e[12]=[o("General")])),_:1}),l(g,{value:"templates"},{default:s(()=>e[13]||(e[13]=[o("Pass Templates")])),_:1}),l(g,{value:"access"},{default:s(()=>e[14]||(e[14]=[o("Access Control")])),_:1})]),_:1},8,["modelValue"]),l(z,{modelValue:f.value,"onUpdate:modelValue":e[2]||(e[2]=a=>f.value=a),class:"mt-4"},{default:s(()=>[l(B,{value:"general"},{default:s(()=>[l(C,{title:"General Settings"},{default:s(()=>[l(w,null,{default:s(()=>e[15]||(e[15]=[o("Settings for the selected place will go here.")])),_:1})]),_:1})]),_:1}),l(B,{value:"templates"},{default:s(()=>[l(c,null,{default:s(()=>[l(v,{cols:"12",class:"d-flex justify-space-between align-center"},{default:s(()=>[e[17]||(e[17]=d("h3",{class:"text-h6"},"Manage Pass Types (Memberships, Day Passes)",-1)),l(m,{color:"primary","prepend-icon":"mdi-plus",onClick:e[1]||(e[1]=a=>U())},{default:s(()=>e[16]||(e[16]=[o("Create Template")])),_:1})]),_:1})]),_:1}),l(c,{class:"mt-2"},{default:s(()=>[(y(!0),A(G,null,H(x.value,a=>(y(),W(v,{cols:"12",md:"4",key:a.id},{default:s(()=>[l(C,{border:"",elevation:"0"},{default:s(()=>[l(q,null,{default:s(()=>[l(E,null,{default:s(()=>[o(r(a.name),1)]),_:2},1024),l(J,null,{default:s(()=>[o(r(a.type)+" • "+r(a.duration)+" Hours",1)]),_:2},1024)]),_:2},1024),l(w,null,{default:s(()=>[d("div",_,[e[18]||(e[18]=d("span",null,"Cost:",-1)),d("span",h,r(a.cost===0?"Free":`₹${a.cost}`),1)]),d("div",ee,[e[19]||(e[19]=d("span",null,"Mode:",-1)),l(L,{size:"x-small",color:a.accessMode==="Auto Entry"?"success":"warning"},{default:s(()=>[o(r(a.accessMode),1)]),_:2},1032,["color"])]),d("div",le,[e[20]||(e[20]=d("span",null,"Membership:",-1)),l(X,{color:a.isMembership?"success":"grey",size:"small"},{default:s(()=>[o(r(a.isMembership?"mdi-check-circle":"mdi-minus-circle"),1)]),_:2},1032,["color"])])]),_:2},1024),l(K),l(I,null,{default:s(()=>[l(m,{variant:"text",color:"primary",size:"small",onClick:j=>U(a)},{default:s(()=>e[21]||(e[21]=[o("Edit")])),_:2},1032,["onClick"]),l(m,{variant:"text",color:"error",size:"small",onClick:j=>$(a.id)},{default:s(()=>e[22]||(e[22]=[o("Delete")])),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(R,{modelValue:i.value,"onUpdate:modelValue":e[11]||(e[11]=a=>i.value=a),"max-width":"500"},{default:s(()=>[l(C,null,{default:s(()=>[l(E,null,{default:s(()=>[o(r(t.value.id?"Edit Template":"New Template"),1)]),_:1}),l(w,null,{default:s(()=>[l(O,{ref_key:"form",ref:T,modelValue:k.value,"onUpdate:modelValue":e[9]||(e[9]=a=>k.value=a),onSubmit:Q(D,["prevent"])},{default:s(()=>[l(M,{modelValue:t.value.name,"onUpdate:modelValue":e[3]||(e[3]=a=>t.value.name=a),label:"Pass Name",rules:[a=>!!a||"Required"]},null,8,["modelValue","rules"]),l(P,{modelValue:t.value.type,"onUpdate:modelValue":e[4]||(e[4]=a=>t.value.type=a),label:"Type",items:["Visitor","Parking"]},null,8,["modelValue"]),l(P,{modelValue:t.value.accessMode,"onUpdate:modelValue":e[5]||(e[5]=a=>t.value.accessMode=a),label:"Access Mode",items:["Auto Entry","Security Check","Reception"]},null,8,["modelValue"]),l(c,null,{default:s(()=>[l(v,{cols:"6"},{default:s(()=>[l(M,{modelValue:t.value.duration,"onUpdate:modelValue":e[6]||(e[6]=a=>t.value.duration=a),modelModifiers:{number:!0},label:"Duration (Hours)",type:"number"},null,8,["modelValue"])]),_:1}),l(v,{cols:"6"},{default:s(()=>[l(M,{modelValue:t.value.cost,"onUpdate:modelValue":e[7]||(e[7]=a=>t.value.cost=a),modelModifiers:{number:!0},label:"Cost (₹)",type:"number"},null,8,["modelValue"])]),_:1})]),_:1}),l(Y,{modelValue:t.value.isMembership,"onUpdate:modelValue":e[8]||(e[8]=a=>t.value.isMembership=a),label:"Is Membership? (Recurring)"},null,8,["modelValue"])]),_:1},8,["modelValue"])]),_:1}),l(I,null,{default:s(()=>[l(Z),l(m,{variant:"text",onClick:e[10]||(e[10]=a=>i.value=!1)},{default:s(()=>e[23]||(e[23]=[o("Cancel")])),_:1}),l(m,{color:"primary",onClick:D,loading:V.value},{default:s(()=>e[24]||(e[24]=[o("Save")])),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]))}};export{oe as default};
