import{_ as L,r as g,c as D,o as U,u as R,a as f,w as t,n as v,aR as H,e as i,f as l,l as u,k as p,aY as O,a_ as W,p as r,x as c,a0 as Y,v as q,aj as F,b6 as Q,H as n,aQ as G,V as J,i as s,ak as k,g as w,F as $,B,h,j as x,a1 as b,av as K,Y as X}from"./index-B12n8wa1.js";import{s as Z}from"./storefrontService-DYcNx_dL.js";import{p as ee}from"./passTemplateService-D9Jd4I3Q.js";import{a as te}from"./accessLevelService-CtifRQSW.js";const le={class:"welcome-section text-center mb-10"},se={key:0,class:"mb-10"},ae={class:"d-flex align-center mb-4"},oe={class:"feature-icon-wrapper mb-3 blue"},ie={class:"text-h6 font-weight-bold"},re={class:"text-caption text-grey"},ne={key:1,class:"mb-10"},de={class:"d-flex align-center mb-4"},ue={class:"feature-icon-wrapper mb-3 indigo"},ce={class:"text-h6 font-weight-bold"},me={class:"text-caption text-grey"},fe={key:2,class:"mb-10"},ve={class:"d-flex align-center mb-4"},pe={class:"feature-icon-wrapper mb-3 green"},ge={class:"text-h6 font-weight-bold"},ye={class:"text-subtitle-2 font-weight-bold color-primary"},he={key:3,class:"mb-10"},xe={class:"d-flex align-center mb-4"},be={class:"feature-icon-wrapper mb-3 orange"},_e={key:4,class:"mb-10"},ke={class:"d-flex align-center mb-4"},we={class:"feature-icon-wrapper mb-2 red",style:{width:"64px",height:"64px"}},Ve={class:"feature-icon-wrapper mb-2 orange",style:{width:"64px",height:"64px"}},Ce={key:0,class:"loading-overlay"},Se={class:"text-center"},Te={class:"text-h6 mt-4 text-grey-darken-2 font-weight-bold"},$e={__name:"DynamicPWA",setup(Be){const N=R(),A=g(!0),V=g(!1),z=g(""),a=g({appName:"Loading...",theme:{primary:"#1976D2",secondary:"#424242",background:"#f5f5f5"},logoUrl:"",modules:{visitor:!1,parking:!1,canteen:!1}}),C=g([]),S=g([]),T=g([]),I=D(()=>a.value.theme?{"--v-theme-primary":a.value.theme.primary,"--v-theme-secondary":a.value.theme.secondary}:{}),M=D(()=>{var d,e;return{background:`linear-gradient(135deg, ${((d=a.value.theme)==null?void 0:d.primary)||"#1976D2"} 0%, ${((e=a.value.theme)==null?void 0:e.secondary)||"#42A5F5"} 100%)`,"-webkit-background-clip":"text","-webkit-text-fill-color":"transparent","background-clip":"text"}}),P=d=>{z.value=`${d} feature coming soon!`,V.value=!0};return U(async()=>{try{const d=N.params.placeId;if(d){const e=await Z.getConfig(d);e&&(e.brandColor&&!e.theme&&(e.theme={...a.value.theme,primary:e.brandColor}),a.value={...a.value,...e,theme:{...a.value.theme,...e.theme||{}},modules:{...a.value.modules,...e.modules||{}}});const _=await ee.getAll();C.value=_.filter(y=>y.type==="Visitor"),S.value=_.filter(y=>y.type==="Parking"),T.value=await te.getAll()}}catch(d){console.error(d)}finally{A.value=!1}}),(d,e)=>(i(),f(H,{style:v(I.value)},{default:t(()=>{var _,y,j;return[l(O,{color:((_=a.value.theme)==null?void 0:_.primary)||"#1976D2",elevation:"0",class:"app-header",height:"80"},{prepend:t(()=>[a.value.logoUrl?(i(),f(F,{key:0,size:"48",class:"ml-4 rounded-lg elevation-2 bg-white pa-1"},{default:t(()=>[l(Q,{src:a.value.logoUrl,contain:""},null,8,["src"])]),_:1})):(i(),f(F,{key:1,color:"white",size:"48",class:"ml-4 rounded-lg"},{default:t(()=>{var o;return[l(n,{color:((o=a.value.theme)==null?void 0:o.primary)||"primary"},{default:t(()=>e[1]||(e[1]=[r("mdi-domain")])),_:1},8,["color"])]}),_:1}))]),default:t(()=>[l(W,{class:"font-weight-bold text-white ml-2"},{default:t(()=>[r(c(a.value.appName),1)]),_:1}),l(Y),l(q,{icon:"mdi-account-circle",color:"white",variant:"text",class:"mr-2"})]),_:1},8,["color"]),l(G,{class:"pwa-main",style:v({backgroundColor:((y=a.value.theme)==null?void 0:y.background)||"#f5f5f5"})},{default:t(()=>[l(J,{class:"py-8 px-4",style:{"max-width":"1200px"}},{default:t(()=>[s("div",le,[s("h1",{class:"text-h3 font-weight-bold mb-3 gradient-text",style:v(M.value)},"Hello!",4),e[2]||(e[2]=s("p",{class:"text-h6 text-grey-darken-1 font-weight-light"},"Choose a service for your visit today",-1))]),a.value.modules.visitor&&C.value.length?(i(),u("div",se,[s("div",ae,[l(n,{color:"blue",class:"mr-2"},{default:t(()=>e[3]||(e[3]=[r("mdi-account-multiple")])),_:1}),e[4]||(e[4]=s("div",{class:"text-h6 font-weight-bold"},"Visitor Entry",-1)),l(k,{class:"ml-4"})]),l(w,null,{default:t(()=>[(i(!0),u($,null,B(C.value,o=>(i(),f(h,{key:o.id,cols:"12",sm:"6",md:"4"},{default:t(()=>{var m;return[l(x,{link:"",to:`/go/visitor-entry?templateId=${o.id}`,class:"feature-card text-center",height:"180",hover:"",elevation:"3",style:v({borderTop:`4px solid ${((m=a.value.theme)==null?void 0:m.secondary)||"#424242"}`})},{default:t(()=>[l(b,{class:"d-flex flex-column align-center justify-center fill-height pa-6"},{default:t(()=>[s("div",oe,[l(n,{size:"40",color:"white"},{default:t(()=>e[5]||(e[5]=[r("mdi-account-plus")])),_:1})]),s("div",ie,c(o.name),1),s("div",re,c(o.accessMode),1)]),_:2},1024)]),_:2},1032,["to","style"])]}),_:2},1024))),128))]),_:1})])):p("",!0),a.value.modules.parking&&S.value.length?(i(),u("div",ne,[s("div",de,[l(n,{color:"indigo",class:"mr-2"},{default:t(()=>e[6]||(e[6]=[r("mdi-parking")])),_:1}),e[7]||(e[7]=s("div",{class:"text-h6 font-weight-bold"},"Parking Access",-1)),l(k,{class:"ml-4"})]),l(w,null,{default:t(()=>[(i(!0),u($,null,B(S.value,o=>(i(),f(h,{key:o.id,cols:"12",sm:"6",md:"4"},{default:t(()=>{var m;return[l(x,{link:"",onClick:E=>P(`Parking Booking: ${o.name}`),class:"feature-card text-center",height:"180",hover:"",elevation:"3",style:v({borderTop:`4px solid ${((m=a.value.theme)==null?void 0:m.secondary)||"#424242"}`})},{default:t(()=>[l(b,{class:"d-flex flex-column align-center justify-center fill-height pa-6"},{default:t(()=>[s("div",ue,[l(n,{size:"40",color:"white"},{default:t(()=>e[8]||(e[8]=[r("mdi-car-select")])),_:1})]),s("div",ce,c(o.name),1),s("div",me,c(o.accessMode),1)]),_:2},1024)]),_:2},1032,["onClick","style"])]}),_:2},1024))),128))]),_:1})])):p("",!0),T.value.length?(i(),u("div",fe,[s("div",ve,[l(n,{color:"success",class:"mr-2"},{default:t(()=>e[9]||(e[9]=[r("mdi-card-account-details")])),_:1}),e[10]||(e[10]=s("div",{class:"text-h6 font-weight-bold"},"Buy Memberships",-1)),l(k,{class:"ml-4"})]),l(w,null,{default:t(()=>[(i(!0),u($,null,B(T.value,o=>(i(),f(h,{key:o.id,cols:"12",sm:"6",md:"4"},{default:t(()=>{var m;return[l(x,{link:"",onClick:E=>P(`Subscription: ${o.name}`),class:"feature-card text-center",height:"180",hover:"",elevation:"3",style:v({borderTop:`4px solid ${((m=a.value.theme)==null?void 0:m.accent)||"#FFC107"}`})},{default:t(()=>[l(b,{class:"d-flex flex-column align-center justify-center fill-height pa-6"},{default:t(()=>[s("div",pe,[l(n,{size:"40",color:"white"},{default:t(()=>e[11]||(e[11]=[r("mdi-wallet-membership")])),_:1})]),s("div",ge,c(o.name),1),s("div",ye,"Starting at â‚¹"+c(o.cost||"Free"),1)]),_:2},1024)]),_:2},1032,["onClick","style"])]}),_:2},1024))),128))]),_:1})])):p("",!0),a.value.modules.canteen?(i(),u("div",he,[s("div",xe,[l(n,{color:"orange",class:"mr-2"},{default:t(()=>e[12]||(e[12]=[r("mdi-apps")])),_:1}),e[13]||(e[13]=s("div",{class:"text-h6 font-weight-bold"},"Facility Services",-1)),l(k,{class:"ml-4"})]),l(w,null,{default:t(()=>[l(h,{cols:"12",sm:"6",md:"4"},{default:t(()=>[l(x,{link:"",to:"/go/canteen",class:"feature-card text-center",height:"180",hover:"",elevation:"3"},{default:t(()=>[l(b,{class:"d-flex flex-column align-center justify-center fill-height pa-6"},{default:t(()=>[s("div",be,[l(n,{size:"40",color:"white"},{default:t(()=>e[14]||(e[14]=[r("mdi-food")])),_:1})]),e[15]||(e[15]=s("div",{class:"text-h6 font-weight-bold"},"Canteen Order",-1)),e[16]||(e[16]=s("div",{class:"text-body-2 text-grey"},"Order food & drinks",-1))]),_:1})]),_:1})]),_:1})]),_:1})])):p("",!0),a.value.modules.security||a.value.modules.canteen?(i(),u("div",_e,[s("div",ke,[l(n,{color:"red",class:"mr-2"},{default:t(()=>e[17]||(e[17]=[r("mdi-shield-account")])),_:1}),e[18]||(e[18]=s("div",{class:"text-h6 font-weight-bold"},"Staff Tools",-1)),l(k,{class:"ml-4"})]),l(w,null,{default:t(()=>[a.value.modules.security?(i(),f(h,{key:0,cols:"12",sm:"6",md:"4"},{default:t(()=>{var o;return[l(x,{link:"",to:"/apps/validator",class:"feature-card text-center",height:"160",hover:"",elevation:"2",style:v({borderBottom:`4px solid ${((o=a.value.theme)==null?void 0:o.primary)||"#f44336"}`})},{default:t(()=>[l(b,{class:"d-flex flex-column align-center justify-center fill-height pa-4"},{default:t(()=>[s("div",we,[l(n,{size:"32",color:"white"},{default:t(()=>e[19]||(e[19]=[r("mdi-qrcode-scan")])),_:1})]),e[20]||(e[20]=s("div",{class:"text-subtitle-1 font-weight-bold"},"Security Scanner",-1)),e[21]||(e[21]=s("div",{class:"text-caption text-grey"},"Verify Entry Passes",-1))]),_:1})]),_:1},8,["style"])]}),_:1})):p("",!0),a.value.modules.canteen?(i(),f(h,{key:1,cols:"12",sm:"6",md:"4"},{default:t(()=>{var o;return[l(x,{link:"",to:"/apps/canteen/validator",class:"feature-card text-center",height:"160",hover:"",elevation:"2",style:v({borderBottom:`4px solid ${((o=a.value.theme)==null?void 0:o.primary)||"#fb8c00"}`})},{default:t(()=>[l(b,{class:"d-flex flex-column align-center justify-center fill-height pa-4"},{default:t(()=>[s("div",Ve,[l(n,{size:"32",color:"white"},{default:t(()=>e[22]||(e[22]=[r("mdi-food-fork-drink")])),_:1})]),e[23]||(e[23]=s("div",{class:"text-subtitle-1 font-weight-bold"},"Canteen Validator",-1)),e[24]||(e[24]=s("div",{class:"text-caption text-grey"},"Verify Meal Claims",-1))]),_:1})]),_:1},8,["style"])]}),_:1})):p("",!0)]),_:1})])):p("",!0),e[25]||(e[25]=s("div",{class:"text-center mt-8 pb-10 text-grey"},[s("div",{class:"text-caption"},"Built with ðŸ’™ by AccessEasy Platform")],-1))]),_:1})]),_:1},8,["style"]),A.value?(i(),u("div",Ce,[s("div",Se,[l(K,{indeterminate:"",color:((j=a.value.theme)==null?void 0:j.primary)||"primary",size:"72",width:"8"},null,8,["color"]),s("div",Te,"Launching "+c(a.value.appName||"Experience")+"...",1)])])):p("",!0),l(X,{modelValue:V.value,"onUpdate:modelValue":e[0]||(e[0]=o=>V.value=o),timeout:3e3,color:"info",location:"top",class:"mt-4"},{default:t(()=>[l(n,{class:"mr-2"},{default:t(()=>e[26]||(e[26]=[r("mdi-auto-fix")])),_:1}),r(" "+c(z.value),1)]),_:1},8,["modelValue"])]}),_:1},8,["style"]))}},De=L($e,[["__scopeId","data-v-b8b599ed"]]);export{De as default};
